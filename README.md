# reuleaux
GSoC Project for robot reachability

Please read this file before using this package

***This package is constantly updated and still in progress. So please use with caution ***



The package is divided into two parts. First part creates the data and second part visualizes the data. To run the programs in a terminal open rviz and open marker/markerArray depending upon your visualization [generally marker for spheres and markerArray for poses]. In a second terminal run the visualization program and in a third terminal run the data generation programs.

For example: To visualize randomly generated positions.

rosrun rviz rviz (add a marker. Fixed frame is /base_link)

rosrun reuleaux rand_pos_generator

rosrun reuleaux show_sphere

(there is a huge delay between messsages purposely generated as the data is quite big and takes time to generate. It will be solved eventually. The publisher would not publish until it is subscribed to the subscriber)

To visualize randomly generated orientations.

rosrun rviz rviz (add a markerArray. Fixed frame is /base_link)

rosrun reuleaux rand_oriention_generator 

rosrun reuleaux show_arrow



There is a visualizer that can visualize the reachability map from openrave. You have to provide the path of the reachability map generated by openrave. The path can be set in the files in the scripts folder. [This will be modified properly]

To run thie visualizers:

roslaunch reuleaux show_spheres.launch

roslaunch reuleaux show_arrow.launch (the data will take some time to generate)

/**********************Reuleaux***************************************/

This package is designed to create a reachability/ capability map of the robot. The steps for creating a map follows:

To visualize the bounding box of the workspace in terms of spheres:

rosrun reuleaux create_sphere_and_show

rosrun reuleaux show_sphere

To visualize the discretized spheres:

rosrun reuleaux create_discretized_sphere

rosrun reuleaux show_discretized_sphere


To visualize all the poses:

rosrun reuleaux create_pose_and_show

rosrun reuleaux show_arrow


To visualize all the reachable poses and spheres:

rosrun reuleaux create_sphere_and_arrow

rosrun reuleaux show_sphere_and_arrow

Will need marker and also markerArray. The map is created upon motoman mh5 robot IK kinematics. Support for other robots are coming. with the resolution of 0.05 it generates 67367 reachable poses. You can decrease the resolution to get more densed map. But then you have to change the scale of markers according to your resolution. Otherwise it will produce a scattered map, as the sphere markers in show_sphere_and_arrow.cpp in file represents the center of the reachable spheres. On a easy thought, make the marker size double of the resolution. If the resolution is 0.25, marker scales are 0.5. 

 [The last resolution I achieved is 0.01, but we have to show only the spheres. Trying to visualize arrows more than 600000, hang my computer with GTX970 graphics card]


Still this map is single colored. To visualize a colored map go to next section.

To visualize a colored map, you can either 


rosrun reuleaux create_sphere_and_arrow_color

rosrun reuleaux show_sphere_and_arrow_color


You need two markerArrays. Set the topics to visualization_marker_spheres and visualization_marker_arrows

Or you can run this launch file:

roslaunch reuleaux show_ws_color.launch


The launch file also shows the motoman robot with joint_state_publisher, so you can validate the results. So you must have motoman_mh5_support package before you run the launch file.

The create_maps file generates and saves a databse of the reachability of robot with reachable poses, sphere locations and reachability index.

You have to have libhdf5 to run the database.
sudo apt-get install libhdf5-serial-dev


The create_capability_map filr generates and saves a database of capability of the robot, with cone and sphere representation.



